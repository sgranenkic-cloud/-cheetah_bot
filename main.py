
import os
from aiogram import Bot, Dispatcher, F, Router
from aiogram.filters import CommandStart
from aiogram.types import (
    Message,
    ReplyKeyboardMarkup, KeyboardButton,
    InlineKeyboardMarkup, InlineKeyboardButton
)

BOT_TOKEN = os.getenv("BOT_TOKEN")
ADMIN_USERNAME = os.getenv("ADMIN_USERNAME", "grondkind")  # default admin username

router = Router()

def main_kb():
    return ReplyKeyboardMarkup(
        resize_keyboard=True,
        keyboard=[
            [KeyboardButton(text="–°—Ç–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º –≥–µ–ø–∞—Ä–¥–æ–º")],
            [KeyboardButton(text="–ß—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –±–µ–≥–∞—Ç—å?")],
            [KeyboardButton(text="–ì–¥–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –∑–∞–Ω—è—Ç–∏—è")],
            [KeyboardButton(text="–ö–∞–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–Ω—è—Ç–∏–π")],
        ],
    )

@router.message(CommandStart())
async def start(msg: Message):
    text = (
        "üêÜ –ü—Ä–∏–≤–µ—Ç!\n"
        "–¢—ã –≤ –±–æ—Ç–µ –±–µ–≥–æ–≤–æ–≥–æ –∫–ª—É–±–∞ Cheetah.Club ‚Äî –º–µ—Å—Ç–µ, –≥–¥–µ –ø—Ä–æ–±–µ–∂–∫–∏ –ø—Ä–µ–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ –ø—Ä–∏–≤—ã—á–∫—É, –∞ –ø—Ä–∏–≤—ã—á–∫–∞ ‚Äî –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç.\n\n"
        "–ó–¥–µ—Å—å —Ç—ã –º–æ–∂–µ—à—å:\n"
        "‚ñ´Ô∏è –£–∑–Ω–∞—Ç—å, –∫–∞–∫ –ø–æ–ø–∞—Å—Ç—å –≤ –∫–æ–º–∞–Ω–¥—É –∏ —Å—Ç–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º –≥–µ–ø–∞—Ä–¥–æ–º.\n"
        "‚ñ´Ô∏è –ü–æ–Ω—è—Ç—å, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø–µ—Ä–≤—ã—Ö —à–∞–≥–æ–≤ –≤ –±–µ–≥–µ.\n"
        "‚ñ´Ô∏è –ù–∞–π—Ç–∏, –≥–¥–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –Ω–∞—à–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏.\n"
        "‚ñ´Ô∏è –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞—Ä–∏—Ñ—ã –∏ —Ñ–æ—Ä–º–∞—Ç –∑–∞–Ω—è—Ç–∏–π.\n\n"
        "–ú—ã —Ç—Ä–µ–Ω–∏—Ä—É–µ–º:\n"
        "üèÉ‚Äç‚ôÄÔ∏è –û—Ç –ø–µ—Ä–≤—ã—Ö  –∫–∏–ª–æ–º–µ—Ç—Ä–æ–≤ –¥–æ –º–∞—Ä–∞—Ñ–æ–Ω–∞ –∏ –¥–∞–ª—å—à–µ.\n"
        "üí¨ –í –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–µ –∏ –æ–Ω–ª–∞–π–Ω.\n"
        "üìÖ –ü–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é –∏ –≤ —É–¥–æ–±–Ω–æ–µ —Ç–µ–±–µ –≤—Ä–µ–º—è.\n\n"
        "–ñ–º—è–∫ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤ –º–µ–Ω—é –∏ –Ω–∞—á–∏–Ω–∞–µ–º!"
    )
    await msg.answer(text, reply_markup=main_kb())

@router.message(F.text == "–°—Ç–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–º –≥–µ–ø–∞—Ä–¥–æ–º")
async def become_cheetah(msg: Message):
    kb = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="–ó–∞–ø–∏—Å–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É",
            url="https://forms.yandex.ru/u/6705fa6c505690f108fe691d/"
        )],
        [InlineKeyboardButton(
            text="–ù–∞–ø–∏—Å–∞—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É",
            url=f"https://t.me/{ADMIN_USERNAME}"
        )],
    ])
    text = (
        "–•–æ—á–µ—à—å –≤ —Å—Ç–∞—é Cheetah.Club? –ó–∞–ø–æ–ª–Ω—è–π —Ñ–æ—Ä–º—É –∏–ª–∏ –Ω–∞–ø–∏—à–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É ‚Äî "
        "–ø–æ–º–æ–∂–µ–º –≤—ã–±—Ä–∞—Ç—å –ø–µ—Ä–≤—É—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É –∏ —Ñ–æ—Ä–º–∞—Ç."
    )
    await msg.answer(text, reply_markup=kb)

@router.message(F.text == "–ß—Ç–æ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –±–µ–≥–∞—Ç—å?")
async def newbie(msg: Message):
    text = (
        "–ú–∏–Ω–∏-—á–µ–∫–ª–∏—Å—Ç –Ω–æ–≤–∏—á–∫–∞:\n"
        "‚Ä¢ –ö—Ä–æ—Å—Å–æ–≤–∫–∏ –¥–ª—è –±–µ–≥–∞, —Ñ—É—Ç–±–æ–ª–∫–∞/—à–æ—Ä—Ç—ã –∏–∑ —Å–∏–Ω—Ç–µ—Ç–∏–∫–∏.\n"
        "‚Ä¢ –ß–∞—Å—ã, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏.\n"
        "‚Ä¢ –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –º–µ–¥. –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–∫–∞–∑–∞–Ω–∏–π.\n"
        "‚Ä¢ –ñ–µ–ª–∞–Ω–∏–µ —Å—Ç–∞—Ç—å –ª—É—á—à–µ ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ."
    )
    await msg.answer(text)

@router.message(F.text == "–ì–¥–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –∑–∞–Ω—è—Ç–∏—è")
async def places(msg: Message):
    text = (
        "–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø:\n"
        "‚Ä¢ –°—Ä–µ–¥–∞ 19:00 ‚Äî –°—Ç–∞–¥–∏–æ–Ω –°–ì–£–ü–°.\n"
        "‚Ä¢ –ß–µ—Ç–≤–µ—Ä–≥ 18:00 ‚Äî –°—Ç–∞–¥–∏–æ–Ω –ù–ì–£ (–≥—Ä—É–ø–ø–∞ –ê–∫–∞–¥–µ–º–∞).\n"
        "‚Ä¢ –í–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ 10:00 ‚Äî —Å–æ–≤–º–µ—Å—Ç–Ω–∞—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –¥–≤—É—Ö –≥—Ä—É–ø–ø "
        "(–õ–æ–∫–æ–º–æ—Ç–∏–≤ / –î–µ–Ω–¥—Ä–æ–ø–∞—Ä–∫ / –õ–î–° –ê—Ä–µ–Ω–∞ ‚Äî –ø–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—é).\n"
        "‚Ä¢ –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ ‚Äî –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –∏ –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ."
    )
    await msg.answer(text)

@router.message(F.text == "–ö–∞–∫–∞—è —Å—Ç–æ–∏–º–æ—Å—Ç—å –∑–∞–Ω—è—Ç–∏–π")
async def prices(msg: Message):
    text = (
        "–¢–∞—Ä–∏—Ñ—ã:\n"
        "‚Ä¢ –ì—Ä—É–ø–ø–æ–≤—ã–µ –∑–∞–Ω—è—Ç–∏—è ‚Äî 8 400 ‚ÇΩ/–º–µ—Å.\n"
        "‚Ä¢ –î–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω–æ–µ –≤–µ–¥–µ–Ω–∏–µ ‚Äî 7 700 ‚ÇΩ/–º–µ—Å."
    )
    await msg.answer(text)

async def run():
    bot = Bot(BOT_TOKEN)
    dp = Dispatcher()
    dp.include_router(router)
    await dp.start_polling(bot)

if __name__ == "__main__":
    import asyncio
    if not BOT_TOKEN:
        raise SystemExit("ENV BOT_TOKEN is required")
    asyncio.run(run())
